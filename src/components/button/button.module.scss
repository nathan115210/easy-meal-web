@use '@styles/tokens/colors' as *;
@use '@styles/tokens/border-radius' as *;
@use '@styles/tokens/spacing' as *;

.button {
  -webkit-tap-highlight-color: transparent;
  appearance: none;
  user-select: none;

  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;

  font: inherit;
  line-height: 1;
  padding: pxToRem(8) pxToRem(12);
  border-radius: $radius-lg;
  border: 1px solid transparent;
  cursor: pointer;
  text-decoration: none;

  transition:
    background-color 120ms ease,
    color 120ms ease,
    border-color 120ms ease,
    opacity 120ms ease;

  &:not(:disabled):hover {
    opacity: 0.92;
  }

  &:focus-visible {
    outline: 2px solid $color-accent;
    outline-offset: 2px;
  }
  /* Filled */
  &--primary {
    background: $color-primary;
    color: $color-primary-foreground;
  }

  &--secondary {
    background: $color-secondary;
    color: $color-secondary-foreground;
  }

  /* Outline */
  &--primary-outline {
    background: transparent;
    color: $color-primary;
    border-color: $color-primary;
  }

  &--secondary-outline {
    background: transparent;
    color: $color-secondary;
    border-color: $color-secondary;
  }

  /* Disabled uses muted palette */
  &:disabled,
  &[aria-disabled='true'] {
    background: $color-muted;
    color: $color-muted-foreground;
    border-color: transparent;
    opacity: 1;
    cursor: not-allowed;
  }

  &:disabled:hover,
  &[aria-disabled='true']:hover {
    opacity: 1;
  }

  &.is-loading,
  &[aria-busy='true'] {
    cursor: progress;
  }
  &--icon-only {
    padding: 0.5rem;
    inline-size: 2.5rem;
    block-size: 2.5rem;
    border-radius: 50%;
  }

  /* Spinner */
  .spinner {
    inline-size: 1em;
    block-size: 1em;
    border: 2px solid currentColor;
    border-right-color: transparent;
    border-radius: 50%;
    animation: button-spin 0.8s linear infinite;
  }

  @keyframes button-spin {
    to {
      transform: rotate(360deg);
    }
  }

  /* SR-only utility */
  .sr-only {
    position: absolute;
    inline-size: 1px;
    block-size: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
}
